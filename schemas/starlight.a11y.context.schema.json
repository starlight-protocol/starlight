{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://starlight-protocol.github.io/schemas/starlight.a11y.context.schema.json",
    "title": "starlight.context (accessibility)",
    "description": "Accessibility audit results from A11y Sentinel - WCAG 2.1 compliance check",
    "type": "object",
    "properties": {
        "jsonrpc": {
            "const": "2.0"
        },
        "method": {
            "const": "starlight.context"
        },
        "params": {
            "type": "object",
            "properties": {
                "key": {
                    "const": "accessibility"
                },
                "value": {
                    "type": "object",
                    "properties": {
                        "timestamp": {
                            "type": "string",
                            "format": "date-time",
                            "description": "ISO 8601 timestamp of audit"
                        },
                        "url": {
                            "type": "string",
                            "format": "uri",
                            "description": "URL of the audited page"
                        },
                        "score": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "Accessibility score (0-1)"
                        },
                        "level": {
                            "type": "string",
                            "enum": [
                                "A (Good)",
                                "B (Acceptable)",
                                "C (Needs Work)",
                                "D (Critical Issues)"
                            ],
                            "description": "Accessibility level grade"
                        },
                        "violations": {
                            "type": "array",
                            "description": "List of WCAG violations found",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "rule": {
                                        "type": "string",
                                        "description": "Rule identifier (e.g., color-contrast)"
                                    },
                                    "wcag": {
                                        "type": "string",
                                        "pattern": "^\\d+\\.\\d+\\.\\d+$",
                                        "description": "WCAG success criterion (e.g., 1.4.3)"
                                    },
                                    "impact": {
                                        "enum": [
                                            "minor",
                                            "moderate",
                                            "serious",
                                            "critical"
                                        ],
                                        "description": "Severity of the violation"
                                    },
                                    "selector": {
                                        "type": "string",
                                        "description": "CSS selector of the violating element"
                                    },
                                    "message": {
                                        "type": "string",
                                        "description": "Human-readable description of the issue"
                                    }
                                },
                                "required": [
                                    "rule",
                                    "impact",
                                    "message"
                                ]
                            }
                        },
                        "passes": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Number of elements that passed checks"
                        },
                        "incomplete": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Number of elements that couldn't be fully checked"
                        }
                    },
                    "required": [
                        "violations",
                        "score"
                    ]
                }
            },
            "required": [
                "key",
                "value"
            ]
        },
        "id": {
            "type": "string"
        }
    },
    "required": [
        "jsonrpc",
        "method",
        "params"
    ]
}