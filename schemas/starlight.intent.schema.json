{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://starlight-protocol.github.io/schemas/starlight.intent.schema.json",
    "title": "starlight.intent",
    "description": "Command from Intent layer to Hub requesting an action",
    "type": "object",
    "properties": {
        "jsonrpc": {
            "const": "2.0"
        },
        "method": {
            "const": "starlight.intent"
        },
        "params": {
            "type": "object",
            "description": "Command parameters",
            "properties": {
                "cmd": {
                    "type": "string",
                    "enum": [
                        "goto",
                        "click",
                        "fill",
                        "screenshot",
                        "checkpoint",
                        "select",
                        "hover",
                        "check",
                        "uncheck",
                        "scroll",
                        "press",
                        "type",
                        "upload"
                    ],
                    "description": "Command type to execute"
                },
                "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Target URL for 'goto' command"
                },
                "selector": {
                    "type": "string",
                    "description": "CSS selector for element-based commands"
                },
                "goal": {
                    "type": "string",
                    "description": "Semantic goal text for resolver (e.g., 'Submit Form', 'Accept Cookies')"
                },
                "text": {
                    "type": "string",
                    "description": "Text to fill for 'fill' command"
                },
                "name": {
                    "type": "string",
                    "description": "Name for screenshot or checkpoint"
                },
                "context": {
                    "type": "object",
                    "description": "Optional context metadata for sovereign state"
                },
                "stabilityHint": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Hint for expected stability delay in milliseconds"
                },
                "files": {
                    "oneOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    ],
                    "description": "File path(s) for 'upload' command"
                },
                "value": {
                    "type": "string",
                    "description": "Value to select or check (for select/check commands)"
                },
                "key": {
                    "type": "string",
                    "description": "Key to press (for press command)"
                }
            },
            "oneOf": [
                {
                    "required": [
                        "cmd",
                        "url"
                    ]
                },
                {
                    "required": [
                        "cmd",
                        "selector"
                    ]
                },
                {
                    "required": [
                        "goal"
                    ]
                },
                {
                    "required": [
                        "cmd",
                        "name"
                    ]
                },
                {
                    "required": [
                        "cmd",
                        "key"
                    ]
                },
                {
                    "required": [
                        "cmd",
                        "text"
                    ]
                },
                {
                    "required": [
                        "cmd",
                        "files"
                    ]
                },
                {
                    "properties": {
                        "cmd": {
                            "const": "scroll"
                        }
                    },
                    "required": [
                        "cmd"
                    ]
                }
            ]
        },
        "id": {
            "type": "string"
        }
    },
    "required": [
        "jsonrpc",
        "method",
        "params",
        "id"
    ]
}