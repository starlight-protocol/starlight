{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://starlight-protocol.github.io/schemas/starlight.pulse.schema.json",
    "title": "starlight.pulse",
    "description": "Periodic heartbeat and entropy broadcast from stability sentinel",
    "type": "object",
    "properties": {
        "jsonrpc": {
            "const": "2.0"
        },
        "method": {
            "const": "starlight.pulse"
        },
        "params": {
            "type": "object",
            "properties": {
                "entropy": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Composite stability score (higher = more unstable)"
                },
                "mutationRate": {
                    "type": "number",
                    "minimum": 0,
                    "description": "DOM mutations per second"
                },
                "networkPending": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Number of pending network requests"
                },
                "animating": {
                    "type": "boolean",
                    "description": "Whether CSS animations are active"
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When this pulse was generated"
                },
                "layer": {
                    "type": "string",
                    "description": "Sentinel layer name"
                }
            },
            "required": [
                "entropy"
            ]
        },
        "id": {
            "type": "string"
        }
    },
    "required": [
        "jsonrpc",
        "method",
        "params",
        "id"
    ]
}