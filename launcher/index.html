<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›°ï¸ Starlight Mission Control</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header class="hero-header">
            <h1>ğŸ›°ï¸ Starlight Mission Control</h1>
            <p>CBA v2.8 â€” Constellation-Based Automation</p>
        </header>

        <section class="status-grid" id="fleet-grid">
            <!-- Hub (always shown) -->
            <div class="status-card" id="hub-card">
                <div class="status-header">
                    <span class="status-icon" id="hub-status">âš«</span>
                    <h3>ğŸ”µ CBA Hub</h3>
                </div>
                <p class="status-desc">Orchestrator & Browser Control</p>
                <select id="browser-select"
                    style="width: 100%; margin-bottom: 8px; padding: 6px; border-radius: 4px; border: 1px solid #334155; background: #0f172a; color: white;"
                    title="Select browser engine before starting Hub">
                    <option value="chromium">ğŸŒ Chromium (Default)</option>
                    <option value="firefox">ğŸ¦Š Firefox</option>
                    <option value="webkit">ğŸ§­ WebKit (Safari)</option>
                </select>
                <button class="btn btn-start" id="hub-btn" onclick="toggleProcess('hub')">Launch Hub</button>
            </div>

            <!-- Dynamic Sentinels loaded here -->

            <!-- Create New Sentinel Card -->
            <a href="/sentinel-editor" class="status-card"
                style="text-decoration: none; display: flex; flex-direction: column; justify-content: center; align-items: center; border-style: dashed; opacity: 0.7;">
                <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">â•</div>
                <h3 style="color: var(--text-secondary);">Create Sentinel</h3>
                <p class="status-desc">Build with Visual Editor</p>
            </a>
        </section>

        <section class="vitals-grid">
            <div class="vital-card">
                <div class="vital-label">Success Rate</div>
                <div class="vital-value" id="success-rate">0%</div>
                <div class="vital-trend">Real-time Mission Health</div>
            </div>
            <div class="vital-card">
                <div class="vital-label">Saved Effort</div>
                <div class="vital-value" id="saved-effort">0<span class="unit">min</span></div>
                <div class="vital-trend">Manual Triage Avoided</div>
            </div>
            <div class="vital-card">
                <div class="vital-label">Sovereign MTTR</div>
                <div class="vital-value" id="sovereign-mttr">0<span class="unit">ms</span></div>
                <div class="vital-trend">Mean Time to Recovery</div>
            </div>
            <div class="vital-card">
                <div class="vital-label">Interventions</div>
                <div class="vital-value" id="interventions-count">0</div>
                <div class="vital-trend">Autonomous Corrections</div>
            </div>
        </section>

        <section class="mission-control">
            <h2>ğŸ¯ Mission Control</h2>
            <div class="mission-row">
                <select id="mission-select">
                    <option value="intent_portfolio_v2.js">Portfolio v2 (Event-Driven)</option>
                    <option value="intent_portfolio.js">Portfolio Demo (dhirajdas.dev)</option>
                    <option value="intent_shadow.js">Shadow DOM Test</option>
                    <option value="intent_learning.js">Learning Demo</option>
                    <option value="intent.js">Default Intent</option>
                </select>
                <button class="btn btn-launch" id="launch-btn" onclick="launchMission()">ğŸš€ Launch Mission</button>
            </div>

            <div class="quick-actions">
                <button class="btn btn-secondary" onclick="startAll()">â–¶ï¸ Start All</button>
                <button class="btn btn-secondary" onclick="stopAll()">â¹ï¸ Stop All</button>
                <input type="text" id="record-url" placeholder="https://example.com"
                    style="padding: 6px; border-radius: 4px; border: 1px solid #334155; background: #0f172a; color: white;">
                <button class="btn btn-record" id="record-btn" onclick="toggleRecording()">ğŸ”´ Record</button>
                <a href="/sentinel-editor" class="btn btn-secondary" style="text-decoration: none;">ğŸ› ï¸ Create
                    Sentinel</a>
                <button class="btn btn-secondary" onclick="openReport()">ğŸ“Š View Report</button>
                <button class="btn btn-secondary" onclick="clearLogs()">ğŸ—‘ï¸ Clear Logs</button>
            </div>
            <div id="recording-indicator" style="display:none; color:#ff4444; font-weight:bold; margin-top:10px;">
                âºï¸ Recording in progress... Click ğŸ”´ to stop
            </div>
        </section>

        <section class="log-console">
            <h2>ğŸ“‹ Live Logs</h2>
            <div class="log-output" id="log-output">
                <div class="log-entry log-info">[System] Starlight Mission Control ready.</div>
                <div class="log-entry log-info">[System] Connect to launcher server to enable process control.</div>
            </div>
        </section>

        <footer class="footer">
            <p>Starlight Protocol v2.8 â€” Built by <a href="https://www.dhirajdas.dev" target="_blank">Dhiraj Das</a></p>
        </footer>
    </div>

    <script src="client.js"></script>
</body>

</html>