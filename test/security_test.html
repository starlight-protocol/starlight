<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 9: Security Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 40px;
        }

        h1 {
            margin-bottom: 20px;
            color: #00d4ff;
        }

        h2 {
            margin: 30px 0 15px;
            color: #ff6b6b;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .pii-data {
            background: rgba(255, 0, 0, 0.2);
            color: #ff9999;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }

        button {
            background: #00d4ff;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }

        button:hover {
            background: #00a8cc;
        }

        /* Shadow DOM component styles are encapsulated */
        .shadow-host {
            border: 2px dashed #ff6b6b;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <h1>üõ°Ô∏è Phase 9: Sovereign Security Test</h1>

    <!-- PII Detection Test Section -->
    <div class="section">
        <h2>üîí PII Detection Test</h2>
        <p>The PII Sentinel should detect the following sensitive data:</p>

        <div class="pii-data">
            <strong>Email:</strong> john.doe@example.com
        </div>
        <div class="pii-data">
            <strong>SSN:</strong> 123-45-6789
        </div>
        <div class="pii-data">
            <strong>Credit Card:</strong> 4111111111111111
        </div>
        <div class="pii-data">
            <strong>Phone:</strong> (555) 123-4567
        </div>

        <button id="pii-submit">Submit Sensitive Data</button>
    </div>

    <!-- Shadow DOM Test Section -->
    <div class="section">
        <h2>üåë Shadow DOM Test</h2>
        <p>The button below is inside a Shadow DOM boundary:</p>

        <div id="shadow-host" class="shadow-host">
            <!-- Shadow root will be attached here -->
        </div>
    </div>

    <!-- Network Test Section -->
    <div class="section">
        <h2>üåê Network Chaos Test</h2>
        <p>These buttons trigger network requests:</p>

        <button id="fetch-api" onclick="fetchAPI()">Fetch API Data</button>
        <button id="fetch-blocked" onclick="fetchBlocked()">Fetch Blocked Resource</button>

        <div id="network-result" style="margin-top: 15px; font-family: monospace;"></div>
    </div>

    <script>
        // Create Shadow DOM component
        const shadowHost = document.getElementById('shadow-host');
        const shadowRoot = shadowHost.attachShadow({ mode: 'open' });

        shadowRoot.innerHTML = `
            <style>
                button {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border: none;
                    padding: 15px 30px;
                    border-radius: 10px;
                    cursor: pointer;
                    font-size: 16px;
                    font-weight: bold;
                }
                button:hover {
                    transform: scale(1.05);
                }
                .message {
                    color: #00ff00;
                    margin-top: 10px;
                    display: none;
                }
            </style>
            <button id="shadow-button">üåô Shadow DOM Button</button>
            <div class="message" id="shadow-message">Shadow button clicked!</div>
        `;

        // Add click handler inside shadow DOM
        const shadowButton = shadowRoot.getElementById('shadow-button');
        const shadowMessage = shadowRoot.getElementById('shadow-message');
        shadowButton.addEventListener('click', () => {
            shadowMessage.style.display = 'block';
            shadowMessage.textContent = 'Shadow button clicked at ' + new Date().toLocaleTimeString();
        });

        // Network test functions
        async function fetchAPI() {
            const result = document.getElementById('network-result');
            result.textContent = 'Fetching...';
            try {
                const response = await fetch('https://httpbin.org/get');
                const data = await response.json();
                result.textContent = '‚úÖ Success: ' + JSON.stringify(data.headers).substring(0, 100) + '...';
            } catch (e) {
                result.textContent = '‚ùå Error: ' + e.message;
            }
        }

        async function fetchBlocked() {
            const result = document.getElementById('network-result');
            result.textContent = 'Fetching blocked resource...';
            try {
                const response = await fetch('https://blocked-domain.test/data');
                result.textContent = '‚úÖ Unexpectedly succeeded';
            } catch (e) {
                result.textContent = 'üö´ Blocked as expected: ' + e.message;
            }
        }

        // PII submit handler
        document.getElementById('pii-submit').addEventListener('click', () => {
            alert('Form submitted! (PII Sentinel should have detected sensitive data)');
        });
    </script>
</body>

</html>