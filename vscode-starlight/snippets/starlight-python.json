{
    "Create Sentinel Base": {
        "prefix": "starlightSentinel",
        "body": [
            "from sdk.starlight_sdk import SentinelBase",
            "",
            "",
            "class ${1:MySentinel}(SentinelBase):",
            "    \"\"\"${2:Description of what this sentinel monitors.}\"\"\"",
            "",
            "    def __init__(self):",
            "        super().__init__(",
            "            layer='${1:MySentinel}',",
            "            priority=${3:5},",
            "            capabilities=['detection', 'healing'],",
            "            selectors=[${4:'.popup', '.modal'}]",
            "        )",
            "",
            "    async def on_pre_check(self, params: dict, msg_id: str) -> None:",
            "        \"\"\"Handle pre-check request from Hub.\"\"\"",
            "        blocking = params.get('blocking', [])",
            "",
            "        if blocking:",
            "            # Found obstacles - request hijack",
            "            await self.send_hijack(msg_id, 'Clearing obstacles')",
            "            # Clear obstacles here",
            "            for elem in blocking:",
            "                await self.send_action('hide', elem['selector'])",
            "            await self.send_resume()",
            "        else:",
            "            # All clear",
            "            await self.send_clear(msg_id)",
            "",
            "",
            "if __name__ == '__main__':",
            "    import asyncio",
            "    asyncio.run(${1:MySentinel}().start())"
        ],
        "description": "Create a new Starlight Sentinel in Python"
    },
    "Send Clear": {
        "prefix": "sendClear",
        "body": "await self.send_clear(${1:msg_id})",
        "description": "Send clear response to approve action"
    },
    "Send Wait": {
        "prefix": "sendWait",
        "body": "await self.send_wait(${1:msg_id}, retry_after_ms=${2:500})",
        "description": "Send wait response to veto action"
    },
    "Send Hijack": {
        "prefix": "sendHijack",
        "body": "await self.send_hijack(${1:msg_id}, '${2:Reason for hijack}')",
        "description": "Request exclusive browser control"
    },
    "Send Resume": {
        "prefix": "sendResume",
        "body": "await self.send_resume(re_check=${1:True})",
        "description": "Release browser control after hijack"
    },
    "Send Action Click": {
        "prefix": "actionClick",
        "body": "await self.send_action('click', '${1:selector}')",
        "description": "Execute click action during hijack"
    },
    "Send Action Hide": {
        "prefix": "actionHide",
        "body": "await self.send_action('hide', '${1:selector}')",
        "description": "Hide an element during hijack"
    },
    "Context Update": {
        "prefix": "contextUpdate",
        "body": "await self.send_context_update({'${1:key}': ${2:value}})",
        "description": "Update sovereign context"
    },
    "On Pre Check Handler": {
        "prefix": "onPreCheck",
        "body": [
            "async def on_pre_check(self, params: dict, msg_id: str) -> None:",
            "    \"\"\"Handle pre-check request.\"\"\"",
            "    blocking = params.get('blocking', [])",
            "    screenshot = params.get('screenshot', '')",
            "    url = params.get('url', '')",
            "    command = params.get('command', {})",
            "",
            "    $0",
            "",
            "    await self.send_clear(msg_id)"
        ],
        "description": "Pre-check handler template"
    },
    "Vision Analysis": {
        "prefix": "visionAnalyze",
        "body": [
            "# Analyze screenshot with local LLM",
            "screenshot = params.get('screenshot', '')",
            "if screenshot:",
            "    import base64",
            "    # screenshot is base64 encoded",
            "    result = await self._analyze_with_ollama(screenshot)",
            "    if 'obstacle' in result.lower():",
            "        await self.send_hijack(msg_id, result)"
        ],
        "description": "Vision-based analysis template"
    }
}